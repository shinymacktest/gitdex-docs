---
title: "Backend Overview"
description: "Overview of the backend architecture for the chat application."
---
# Backend Overview

<TOC />

This document provides an overview of the backend architecture for the chat application.  The backend is built using Express.js, utilizing various libraries for database interaction, authentication, and image handling.

## Database Interaction

The application uses MongoDB as its database. The connection is established using `mongoose` in [`backend/src/lib/db.js`](https://github.com/shinymack/Chat-App-MERN/blob/main/backend/src/lib/db.js).  The `connectDB` function handles the connection process, logging success or errors to the console.

```javascript
// backend/src/lib/db.js
import mongoose from "mongoose"

export const connectDB = async () => {
  try {
    const conn = await mongoose.connect(process.env.MONGODB_URI);
    console.log(`MongoDB connected:  ${conn.connection.host}`);
  }
  catch(error){
    console.log("MongoDB connection error: ", error);
  }
}
```

## Authentication

User authentication is handled using Passport.js with a Google OAuth 2.0 strategy, as configured in [`backend/src/lib/passport.config.js`](https://github.com/shinymack/Chat-App-MERN/blob/main/backend/src/lib/passport.config.js). This allows users to sign in using their Google accounts.  The `configurePassport` function sets up the strategy, serializes and deserializes user data for sessions.

````mermaid
graph TD
    A[User] --> B(Google OAuth);
    B --> C[Passport.js];
    C --> D[Express.js];
    D --> E[User Data (MongoDB)];
    style B fill:#f9f,stroke:#333,stroke-width:2px
```

## API Endpoints

The backend exposes several API endpoints for managing friends, messages, and user data. These endpoints are organized into routes: `/api/auth`, `/api/messages`, and `/api/friends`.

## Image Handling

Image uploads are handled using Cloudinary, as configured in [`backend/src/lib/cloudinary.js`](https://github.com/shinymack/Chat-App-MERN/blob/main/backend/src/lib/cloudinary.js). The `cloudinary` library provides functions for uploading images and retrieving URLs.


Next: [2_friend_management.mdx]