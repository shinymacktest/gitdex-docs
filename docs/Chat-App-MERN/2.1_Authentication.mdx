---
title: "Backend Authentication"
description: "Detailed explanation of the backend authentication system."
---
# Backend Authentication

<TOC />

This section details the authentication mechanisms implemented in the backend of the MERN chat application.  The system supports both email/password and Google OAuth 2.0 login.

## Authentication API Endpoints

The `backend/src/controllers/auth.controller.js` file contains the core logic for authentication:

### Signup (`/signup`)

The `/signup` endpoint handles user registration.  It validates input, hashes the password using bcrypt, creates a new user in the database, and generates a JWT (JSON Web Token) for authentication:

```javascript
export const signup = async (req, res) => {
    // ... (validation and user creation logic) ...
    generateToken(newUser._id, res); // Generate JWT
    await newUser.save();
    // ... (response handling) ...
};
```

[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/backend/src/controllers/auth.controller.js)

### Login (`/login`)

The `/login` endpoint handles user login. It verifies credentials against the database, and generates a JWT upon successful authentication:


```javascript
export const login = async (req, res) => {
    // ... (user lookup and password verification) ...
    generateToken(user._id, res); // Generate JWT
    // ... (response handling) ...
};
```

[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/backend/src/controllers/auth.controller.js)

### Logout (`/logout`)

The `/logout` endpoint clears the authentication cookie, effectively logging the user out.


```javascript
export const logout = (req, res) => {
    res.cookie("jwt", "", {maxAge: 0});
    res.status(200).json({message: "Logged out successfully."})
};
```

[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/backend/src/controllers/auth.controller.js)


### Google OAuth 2.0 (`/auth/google/callback`)

The `/auth/google/callback` endpoint handles the callback from the Google OAuth 2.0 flow.  After successful authentication with Google, it generates a JWT and redirects the user to the frontend.

```javascript
export const googleAuthCallback = async (req, res) => {
    // ... (error handling and JWT generation) ...
    generateToken(req.user._id, res);
    res.redirect(frontendUrl);
};
```

[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/backend/src/controllers/auth.controller.js)

## Authentication Flow (Simplified)

````mermaid
sequenceDiagram
    participant U as User
    participant S as Server
    U->>S: Signup Request
    activate S
    S->>S: Validate & Create User
    S->>S: Generate JWT
    S-->>U: Success & JWT
    deactivate S
    U->>S: Login Request
    activate S
    S->>S: Authenticate User
    S->>S: Generate JWT
    S-->>U: Success & JWT
    deactivate S
    U->>S: Logout Request
    activate S
    S->>S: Clear Cookie
    S-->>U: Success
    deactivate S

    U->>S: Google Login
    activate S
    S->>G: Google Auth
    activate G
    G-->>S: Auth Result
    deactivate G
    S->>S: Generate JWT
    S-->>U: Redirect to Frontend
    deactivate S
```