---
title: "Frontend State Management"
description: "Details on Zustand stores for managing application state."
---
# Frontend State Management

<TOC />

The application utilizes Zustand for efficient state management.  Two key stores are defined: `useChatStore` and `useThemeStore`.

## `useChatStore`

This store manages all aspects of the chat functionality, including:

* **Messages:**  An array of chat messages.
* **Users:** A list of friends.
* **Pending/Sent Requests:**  Lists of pending and sent friend requests.
* **Selected User:**  The currently selected user for chat.
* **Loading States:** Booleans indicating loading status for users and messages.
* **Friend Box:**  State to control the visibility of the friend's list.

The store provides asynchronous actions for fetching friends, managing friend requests (sending, accepting, rejecting, removing), fetching messages, sending messages, and subscribing/unsubscribing to real-time message updates via a socket (implied from `useAuthStore.getState().socket`).

```javascript
// Snippet from useChatStore.js
getMessages: async (userId) => {
    set({isMessagesLoading: true});
    try {
        const res = await axiosInstance.get(`/messages/${userId}`);
        set({messages: res.data});
    } catch (error) {
        toast.error(error.response.data.message);
    } finally {
        set({isMessagesLoading: false});
    }
},
```

[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/store/useChatStore.js)

````mermaid
graph TD
    A[Component] --> B(useChatStore);
    B --> C[API calls (axios)];
    B --> D[State updates];
    C --> E[Backend Server];
    E --> F[Database];
    style B fill:#a29bfe,stroke:#311b92,stroke-width:2px
```


## `useThemeStore`

This simple store manages the application theme, persisting it in localStorage:

```javascript
// Snippet from useThemeStore.js
setTheme: (theme) => {
    localStorage.setItem("chat-theme", theme);
    set({theme});
}
```

[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/store/useThemeStore.js)

Next: [3_frontend_styling.mdx]