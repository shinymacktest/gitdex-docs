---
title: "Profile Page"
description: "Detailed explanation of the ProfilePage component and its functionality."
---
# Profile Page

<TOC />

This document details the implementation of the `ProfilePage` component, which allows users to view and update their profile information within the application.  The component utilizes the `useAuthStore` hook to manage authentication state and interacts with a backend API (via `axiosInstance`) for profile updates.

## Core Functionality

The `ProfilePage` displays the user's profile picture, username, email address, and account information (membership date, status).  It allows users to update their profile picture by uploading a new image.  Crucially, it also incorporates a debounced username update mechanism to prevent unnecessary API calls.

### Profile Picture Update

Users can update their profile picture by clicking the camera icon, which triggers the `handleImageUpload` function. This function reads the selected image file as a base64 string, updates the component's state (`selectedImg`), and calls the `updateProfile` function from the `useAuthStore` hook to persist the change to the backend.

```javascript
const handleImageUpload = async (e) => {
  const file = e.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.readAsDataURL(file);

  reader.onload = async () => {
    const base64Image = reader.result;
    setSelectedImg(base64Image);
    await updateProfile({ profilePic: base64Image });
  };
};
```
[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/pages/ProfilePage.jsx)

### Username Update with Debouncing

The username update functionality employs a debounce mechanism to prevent frequent API calls when the user types.  The `useEffect` hook with a `debounceTimeout` ref manages this.  Only after a 500ms delay without further input does it check username availability using `axiosInstance`.

```javascript
useEffect(() => {
  clearTimeout(debounceTimeout.current);
  // ... debounce logic ...
}, [newUsername, authUser.username]);
```
[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/pages/ProfilePage.jsx)


## Component Structure

The component is structured using Tailwind CSS for styling.  It comprises several sections: profile picture, user information (username and email), and account information.  The username section features an editable field with real-time validation and saving functionality.

````mermaid
graph TD
    A[ProfilePage] --> B(Profile Picture Section);
    A --> C(User Info Section);
    A --> D(Account Info Section);
    C --> E[Username];
    C --> F[Email];
    E --> G{Edit Mode?};
    G -- Yes --> H[Username Input];
    G -- No --> I[Display Username];
    H --> J[Save Button];
    H --> K[Cancel Button];

```

##  Error Handling and Loading States

The component gracefully handles loading states (`isUpdatingProfile`) and provides feedback to the user regarding username availability checks.  Error messages are displayed using `react-hot-toast` for a user-friendly experience.

Next: [Link to next section]