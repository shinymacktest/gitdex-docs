---
title: "User Interface Components"
description: "Detailed breakdown of reusable UI components used throughout the frontend application."
sidebar_position: 31
---

# User Interface Components

<TOC />

This section provides a detailed overview of the core reusable user interface components that form the foundation of the ShinyChat frontend application. These components are designed to be modular, facilitating maintainability and scalability, and interact extensively with the application's state management layer to provide a dynamic user experience.

## `ChatContainer`

The `ChatContainer` component is the central hub for displaying messages within a selected chat. It manages the fetching, rendering, and real-time updating of messages for a specific conversation.

### Key Responsibilities

*   **Message Display**: Renders a list of messages, distinguishing between sent and received messages.
*   **Real-time Updates**: Subscribes to new messages via WebSocket, ensuring the chat view is always up-to-date.
*   **Initial Data Fetching**: Fetches historical messages for the currently selected user.
*   **Scrolling Management**: Automatically scrolls to the latest message.
*   **Loading State**: Displays skeleton loaders while messages are being fetched.
*   **User Information**: Displays sender's profile picture and message timestamp.

### Message Fetching and Subscription

The `ChatContainer` utilizes `useEffect` hooks to manage the lifecycle of message data. When a `selectedUser` changes, it fetches new messages and establishes a WebSocket subscription for real-time updates.

```jsx title="frontend/src/components/ChatContainer.jsx" {10-14}
// highlight-next-line
import { useEffect, useRef } from "react";
import { useChatStore } from "../store/useChatStore";
import ChatHeader from "./ChatHeader";
import MessageInput from "./MessageInput";
import MessageSkeleton from "./skeletons/MessageSkeleton";
import { useAuthStore } from "../store/useAuthStore";
import { formatMessageTime } from "../lib/utils";

const ChatContainer = () => {
    const { messages, getMessages, isMessagesLoading, selectedUser, subscribeToMessages, unsubscribeFromMessages } =
        useChatStore();
    const { authUser } = useAuthStore();
    const messageEndRef = useRef(null);


    useEffect(() => {
        // Fetch messages for the selected user and subscribe to new messages
        getMessages(selectedUser._id);
        subscribeToMessages();

        // Cleanup: Unsubscribe from messages when the component unmounts or selectedUser changes
        return () => unsubscribeFromMessages();
    }, [selectedUser._id, getMessages, subscribeToMessages, unsubscribeFromMessages]); // Dependencies

    // ...
};
```
[View on GitHub](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/ChatContainer.jsx#L10-L26)

### Auto-Scrolling to Latest Message

Another `useEffect` ensures that the chat view automatically scrolls to the bottom whenever new messages arrive, providing a seamless user experience.

```jsx title="frontend/src/components/ChatContainer.jsx" {28-32}
// highlight-next-line
    useEffect(() => {
        if(messageEndRef.current && messages){
            messageEndRef.current.scrollIntoView({behaviour : "smooth"})
        }
    }, [messages]) // Scrolls when messages array updates
```
[View on GitHub](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/ChatContainer.jsx#L28-L32)

### Message Rendering Logic

Messages are rendered dynamically, with different styling applied based on whether the message was sent by the current `authUser` or another user. It also handles the display of image attachments.

```jsx title="frontend/src/components/ChatContainer.jsx" {40-66}
// highlight-next-line
            <div className="flex-1 overflow-y-auto p-4 space-y-4">
                {messages.map((message) => (
                    <div
                        key={message._id}
                        className={`chat ${message.senderId == authUser._id ? "chat-end": "chat-start"} `}
                        ref={messageEndRef}
                    >
                        <div className="chat-image avatar">
                            <div className="size-9 rounded-full border">
                                <img
                                    src={message.senderId == authUser._id ? authUser.profilePic || "/avatar.png": selectedUser.profilePic || "/avatar.png"}
                                    alt="profilepic"
                                 />
                            </div>
                        </div>
                        <div className="chat-header mb-1">
                            <time className="text-xs opacity-50 ml-1">{formatMessageTime(message.createdAt)}</time>
                        </div>
                        <div className="chat-bubble flex flex-col">
                            {message.image && (
                                <img 
                                    src={message.image}
                                    alt="Attachment"
                                    className="sm:max-w-[200px] rounded-md " 
                                />
                            )}
                            {message.text && <p>{message.text}</p>}
                        </div>
                    </div>
                ))}
            </div>
```
[View on GitHub](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/ChatContainer.jsx#L40-L66)

## `MessageInput`

The `MessageInput` component provides an interface for users to compose and send messages, including text and image attachments.

### Key Responsibilities

*   **Text Input**: Allows users to type text messages.
*   **Image Attachment**: Supports selecting and previewing images before sending.
*   **Message Sending**: Handles the submission of messages to the backend via the `useChatStore`.
*   **Input Clearing**: Clears the input field and image preview after a message is sent.
*   **Validation**: Ensures either text or an image is present before sending.

### Handling Image Selection and Preview

Users can attach images to their messages. The component provides functionality to select an image, display a preview, and remove it before sending.

```jsx title="frontend/src/components/MessageInput.jsx" {14-31}
import { useRef, useState } from "react";
import { useChatStore } from "../store/useChatStore";
import { Image, Send, X } from "lucide-react";
import toast from "react-hot-toast";

const MessageInput = () => {
    const [text, setText] = useState("");
    const [imagePreview, setImagePreview] = useState(null);
    const fileInputRef = useRef(null);
    const { sendMessage } = useChatStore();

    const handleImageChange = (e) => {
        const file = e.target.files[0];
        if (!file.type.startsWith("image/")) {
            toast.error("Please select an image file");
            return;
        }

        const reader = new FileReader();
        reader.onloadend = () => {
            setImagePreview(reader.result);
        };
        reader.readAsDataURL(file);
    };

    const removeImage = () => {
        setImagePreview(null);
        if (fileInputRef.current) fileInputRef.current.value = "";
    };

    // ...
};
```
[View on GitHub](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/MessageInput.jsx#L14-L31)

### Sending Messages

The `handleSendMessage` function orchestrates the submission of the message (text, image, or both) to the chat store, which then communicates with the backend.

```jsx title="frontend/src/components/MessageInput.jsx" {33-47}
// highlight-next-line
    const handleSendMessage = async (e) => {
        e.preventDefault();
        if (!text.trim() && !imagePreview) return; // Prevent sending empty messages

        try {
            await sendMessage({ // Call sendMessage from useChatStore
                text: text.trim(),
                image: imagePreview,
            });

            // Reset input fields after successful send
            setText("");
            setImagePreview(null);
            if (fileInputRef.current) fileInputRef.current = "";
        } catch (error) {
            console.error("Failed to send message", error);
        }
    };
```
[View on GitHub](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/MessageInput.jsx#L33-L47)

### Component Interaction Diagram

The following diagram illustrates how the core chat components interact with each other and the central `useChatStore`.





```mermaid
graph TD
    S["Sidebar"] -->|Sets selectedUser| UCS["useChatStore"]
    UCS -->|selectedUser, messages, getMessages| CC["ChatContainer"]
    CC -->|renders| CH["ChatHeader"]
    CC -->|renders| MI["MessageInput"]
    MI -->|sendMessage(text, image)| UCS
    UCS --.->|New messages via WebSocket| CC
    UCS --.->|Online users| S
    UCS --.->|Auth status| CC
    UCS --.->|Auth status| MI
```



## `Navbar`

The `Navbar` component serves as the primary navigation bar for the application, providing access to different sections and user actions.

### Key Responsibilities

*   **Branding**: Displays the application logo and name.
*   **Navigation**: Provides links to home, settings, and profile pages.
*   **Friends List Toggle**: Offers a button to toggle the visibility of the friends list (sidebar).
*   **Authentication Actions**: Displays logout button if a user is authenticated.

### Authentication-Dependent Navigation

The `Navbar` dynamically renders navigation links based on the user's authentication status, obtained from `useAuthStore`.

```jsx title="frontend/src/components/Navbar.jsx" {18-24,35-47}
import { Link } from "react-router-dom";
import { useAuthStore } from "../store/useAuthStore";
import { LogOut, MessageSquare, Settings, User, Users } from "lucide-react";
import { useChatStore } from "../store/useChatStore";

const Navbar = () => {
  const { logout, authUser } = useAuthStore(); // Highlighted: authUser and logout from auth store
  const { toggleFriendsBox } = useChatStore(); 

  return (
    <header
      className=" bg-base-100 border-b border-base-300 fixed w-full top-0 z-40
        backdrop-blur-lg bg-base-100/80"
    >
      <div className="container mx-auto px-4 h-16">
        <div className="flex items-center justify-between h-full">
          {/* ... Brand Link ... */}
          <div className="flex items-center gap-4">
            <button className="btn btn-sm gap-2" onClick={toggleFriendsBox}>
              <Users className="size-5" />
              <span className="hidden sm:inline">Friends</span>
            </button>
            <Link to={"/settings"}
            className={`btn btn-sm gap-2 transition-colors`}>
            <Settings className="size-4"/>
            <span className="hidden sm:inline">Settings</span>

            </Link>
            {/* Highlighted: Conditional rendering based on authUser */}
            {authUser && (
              <>
                <Link to={"/profile"} className={`btn btn-sm gap-2`}>
                  <User className="size-5" />
                  <span className="hidden sm:inline">Profile</span>
                </Link>

                <button className="btn btn-sm flex gap-2 items-center" onClick={logout}>
                  <LogOut className="size-5" />
                  <span className="hidden sm:inline">Logout</span>
                </button>
              </>
            )}
          </div>
        </div>
      </div>
    </header>
  );
};

export default Navbar;
```
[View on GitHub](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/Navbar.jsx#L18-L47)

## `Sidebar`

The `Sidebar` component displays a list of the user's friends, allowing them to select a friend to start or continue a chat. It also indicates online/offline status.

### Key Responsibilities

*   **Friend List Display**: Shows a list of all friends.
*   **Friend Selection**: Allows users to click on a friend to make them the `selectedUser`.
*   **Online Status Indicator**: Visually represents which friends are currently online.
*   **Online Filter**: Provides an option to filter and show only online friends.
*   **Loading State**: Displays a skeleton loader while fetching friends.
*   **Responsive Visibility**: Adapts its visibility based on the `selectedUser` on smaller screens.

### Fetching Friends and Managing Online Status

The `Sidebar` fetches the list of friends upon component mount and continuously monitors `onlineUsers` from the `useAuthStore` to update their status.

```jsx title="frontend/src/components/Sidebar.jsx" {6-13}
import { useEffect, useState } from "react";
import { useChatStore } from "../store/useChatStore";
import SidebarSkeleton from "./skeletons/SidebarSkeleton";
import { Users } from "lucide-react";
import { useAuthStore } from "../store/useAuthStore"; // Highlighted: Importing useAuthStore

const Sidebar = () => {
    const { getFriends, users, selectedUser, setSelectedUser, isUsersLoading } =
        useChatStore();

    const { onlineUsers } = useAuthStore(); // Highlighted: Getting online users from auth store
    const [showOnlineOnly, setShowOnlineOnly] = useState(false);
    useEffect(() => {
        getFriends(); // Fetch friends when component mounts
    }, [getFriends]);
    // ...
};
```
[View on GitHub](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/Sidebar.jsx#L6-L13)

### Filtering Friends by Online Status

Users can toggle a checkbox to view only their online friends, making it easier to find active contacts.

```jsx title="frontend/src/components/Sidebar.jsx" {14-34}
// highlight-next-line
    const filteredUsers = showOnlineOnly
        ? users.filter((user) => onlineUsers.includes(user._id))
        : users;
    if (isUsersLoading) return <SidebarSkeleton />;
    return (
        <div className={`h-full sm:w-72 sm:border-r border-base-300  flex-col transition-all duration-200 ${selectedUser ?
                                    "hidden sm:flex w-[100vw] "
                                    : ""}`}>
            <div className="border-b border-base-300  p-5">
                <div className="flex items-center gap-2">
                    <Users className="size-6"></Users>
                    <span className="font-medium  lg:block">
                        Friends
                    </span>
                </div>
                {/* Online toggle filter */}
                <div className="mt-3 lg:flex items-center gap-2">
                    <label className="cursor-pointer flex items-center gap-2">
                        <input
                            type="checkbox"
                            checked={showOnlineOnly}
                            onChange={(e) =>
                                setShowOnlineOnly(e.target.checked)
                            }
                            className="checkbox checkbox-sm"
                        />
                        <span className="text-sm">Show online only</span>
                    </label>
                    <span className="text-xs text-zinc-500">
                          ({users.filter(friend => onlineUsers.includes(friend._id)).length} online)
                    </span>
                </div>
                {/* ... Friend List ... */}
            </div>
        </div>
    );
};
```
[View on GitHub](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/Sidebar.jsx#L14-L34)

## Key Integration Points

These UI components are heavily integrated through the application's state management layer, primarily `useChatStore` and `useAuthStore` (via Zustand). This architecture allows for a decoupled yet reactive system:

*   **`useAuthStore`**: Provides global authentication status (`authUser`), logout functionality, and `onlineUsers` list, which are critical for `Navbar` (conditional rendering, logout) and `Sidebar` (online status, filtering) and `ChatContainer` (distinguishing sender).
*   **`useChatStore`**: Manages the core chat state, including `selectedUser`, `messages`, and functions like `getMessages`, `sendMessage`, `subscribeToMessages`, `unsubscribeFromMessages`, and `getFriends`. This store acts as the central data source and controller for `ChatContainer`, `MessageInput`, and `Sidebar`.
*   **Props vs. Store**: While some data might flow via props (e.g., within sub-components of `ChatContainer`), the primary data exchange for global or shared states (like selected user, messages, online status) occurs through these Zustand stores, reducing prop-drilling.
*   **Real-time Communication**: The `useChatStore` encapsulates the WebSocket logic for real-time message updates, which `ChatContainer` subscribes to, demonstrating a clear separation of concerns.

This component design ensures a responsive and interactive user experience by keeping the UI components focused on rendering and user interaction, while delegating complex data management and real-time synchronization to the global state stores.

Next: [Frontend State Management and Pages](./3.2_frontend-state-management-and-pages.mdx)