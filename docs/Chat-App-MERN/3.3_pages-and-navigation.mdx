---
title: "Pages and Navigation"
description: "Outline of the different application pages and their routing within the frontend."
sidebar_position: 33
---

---
title: "Pages and Navigation"
description: "Outline of the different application pages and their routing within the frontend."
sidebar_position: 33
---

# Pages and Navigation

<TOC />

This section details the structure and routing of the user interface within the frontend application, specifically focusing on how different pages are rendered and managed using `react-router-dom`. The primary entry point for routing logic is `App.jsx`, which dynamically renders components based on the current URL and user authentication status.

## Application Pages Overview

The application is structured around several key pages, each serving a distinct purpose within the user experience. Navigation between these pages is handled conditionally, often requiring user authentication for access to certain features.

### Home Page
The `HomePage` serves as the main interface for authenticated users, displaying the core chat functionality. It orchestrates the display of chat contacts, message containers, and user's friends list.

### Authentication Pages
The `LoginPage` and `SignUpPage` are dedicated to user authentication, allowing new users to register and existing users to sign in. These pages include forms for credential submission and provide options for Google-based authentication.

### User-Specific Pages
`SettingsPage` and `ProfilePage` are intended for authenticated users to manage their account settings and view their profile details, respectively.

## Frontend Routing

The frontend routing is managed using `react-router-dom`, providing a declarative way to define the application's navigation flow. The main routing configuration is found within `App.jsx`.

### Core Routing Structure

The `App.jsx` file imports all necessary page components and sets up the primary routing logic. It also incorporates global state management for user authentication and theme, which influences navigation behavior.

```jsx title="frontend/src/App.jsx"
// ...
import { Routes, Route, Navigate } from 'react-router-dom'
import { useEffect } from 'react'
import HomePage from './pages/HomePage'
import SignUpPage from './pages/SignUpPage'
import LoginPage from './pages/LoginPage'
import SettingsPage from './pages/SettingsPage'
import ProfilePage from './pages/ProfilePage'
// ...
import { useAuthStore } from './store/useAuthStore';

const App = () => {
  const { authUser, checkAuth, isCheckingAuth, onlineUsers } = useAuthStore();
  // ...
  useEffect(() => {
    checkAuth();
  }, [checkAuth]);

  // ... loader
  return (
    <div className='' data-theme={theme}>
      <Navbar />
      <Toaster />
      <Routes>
        <Route path='/' element={authUser ? <HomePage />: <Navigate to='/login' />} />
        <Route path='/signup' element={ !authUser ? <SignUpPage />: <Navigate to='/' />} />
        <Route path='/login' element={!authUser ? <LoginPage />: <Navigate to='/' />} />
        <Route path='/settings' element={<SettingsPage />} />
        <Route path='/profile' element={authUser ? <ProfilePage />: <Navigate to='/login' />} />
      </Routes>
    </div>
  )
}

export default App
```
[[frontend/src/App.jsx#L4-L44]](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/App.jsx#L4-L44)

This snippet demonstrates the core routing logic:

*   **Conditional Rendering:** Routes like `/`, `/signup`, `/login`, and `/profile` are guarded by the `authUser` state. If a user tries to access a protected route without authentication (e.g., `/` or `/profile`), they are redirected to `/login`. Conversely, if an authenticated user tries to access `/signup` or `/login`, they are redirected to `/`.
*   **Authentication Check:** The `useEffect` hook calls `checkAuth()` on component mount, which verifies the user's authentication status and updates the `authUser` state. This ensures that the application's routing state is always in sync with the user's login status.
*   **Loading State:** During the initial authentication check (`isCheckingAuth`), a loader is displayed to prevent flickering or incorrect redirects.

### Home Page Structure

The `HomePage` is a composite component that integrates several sub-components to deliver the main chat interface.

```jsx title="frontend/src/pages/HomePage.jsx"
// ...
import ChatContainer from "../components/ChatContainer";
import FriendsBox from "../components/FriendsBox";
import NoChatSelected from "../components/NoChatSelected";
import Sidebar from "../components/Sidebar";
import { useChatStore } from "../store/useChatStore"

const HomePage = () => {
  const { selectedUser } = useChatStore();
  const { isFriendsBoxOpen } = useChatStore();
  return (
      <div className="h-screen bg-base-200">
      <div className="flex items-center justify-center pt-20 px-4 w-full">
        <div className="bg-base-100 rounded-lg shadow-xl w-full max-w-6xl h-[calc(100vh-8rem)]">
          <div className="flex h-full rounded-lg overflow-hidden w-full">
            <Sidebar />
            {!selectedUser ? <NoChatSelected /> : <ChatContainer />}
            {isFriendsBoxOpen && <FriendsBox />}
          </div>
        </div>
      </div>
    </div>
  )
}

export default HomePage
```
[[frontend/src/pages/HomePage.jsx#L3-L28]](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/pages/HomePage.jsx#L3-L28)

Here's how `HomePage` manages its content:

*   **Layout:** It uses a flexbox layout to arrange `Sidebar`, `ChatContainer`, and `FriendsBox`.
*   **Dynamic Chat Display:** The `selectedUser` from `useChatStore` determines whether to show a `NoChatSelected` placeholder or the `ChatContainer` with an active conversation. This design ensures that the UI is responsive to user interactions, switching between states seamlessly.
*   **Friends Box:** The `isFriendsBoxOpen` state controls the visibility of the `FriendsBox` component, allowing users to toggle their friends list.

### Login Page Details

The `LoginPage` facilitates user authentication, offering both email/password login and Google OAuth.

```jsx title="frontend/src/pages/LoginPage.jsx"
// ...
import { useAuthStore } from "../store/useAuthStore";
import { Eye, EyeOff, Loader2, Lock, Mail, MessageSquare } from "lucide-react";
import { Link } from "react-router-dom";
import AuthImagePattern from "../components/AuthImagePattern";
import { FcGoogle } from "react-icons/fc";

const LoginPage = () => {
  const [showPassword, setShowPassword] = useState(false);
  const [formData, setFormData] = useState({
    email: "",
    password: "",
  })
  const { login, isLoggingIn } = useAuthStore();

  const handleSubmit = async (e) => {
    e.preventDefault();
    login(formData);
  }
  const backendDomain = import.meta.env.VITE_BACKEND_URL;
  const googleAuthUrl = `${backendDomain}/api/auth/google`;
  return (
    <div className="h-screen grid lg:grid-cols-2">
      <div className="flex flex-col justify-center items-center p-6 sm:p-12">
        {/* ... Logo and Description ... */}
          <form onSubmit={handleSubmit} className="space-y-6">
            <div className="form-control">
              <label className="label">
                <span className="label-text font-medium">Email</span>
              </label>
              <div className="relative">
                <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <Mail className="h-5 w-5 text opacity-40" />
                </div>
                <input
                  type="email"
                  className={`input input-bordered w-full pl-10`}
                  placeholder="you@example.com"
                  value={formData.email}
                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                />
              </div>
            </div>
            {/* ... Password input ... */}
            <button type="submit" className="btn btn-primary w-full" disabled={isLoggingIn}>
              {isLoggingIn ? (
                <>
                  <Loader2 className="h-5 w-5 animate-spin" />
                  Loading...
                </>
              ) : (
                "Sign in"
              )}
            </button>
          </form>
          <div className="divider text-base-content/60 my-4">OR</div>
          <a
            href={googleAuthUrl}
            className="btn btn-primary btn-outline w-full"
          >
            <FcGoogle className="size-5 mr-2" />
            Sign in with Google
          </a>
          <div className="text-center">
            <p className="text-base-content/60">
              Don&apos;t have an account?{" "}
              <Link to="/signup" className="link link-primary">
                Create account
              </Link>
            </p>
          </div>
        </div>
      </div>
      <AuthImagePattern
        title={"Welcome back!"}
        subtitle={"Sign in to continue your conversations and catch up with your messages."}
      />
    </div>
  )
}
export default LoginPage
```
[[frontend/src/pages/LoginPage.jsx#L3-L121]](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/pages/LoginPage.jsx#L3-L121)

Key aspects of the `LoginPage`:

*   **State Management:** `useState` is used for form input (`formData`) and UI elements like `showPassword`. `useAuthStore` provides the `login` function and `isLoggingIn` state for handling authentication requests and showing loading indicators.
*   **Form Submission:** The `handleSubmit` function triggers the `login` action from the authentication store, sending user credentials to the backend.
*   **Google OAuth:** The page includes a direct link for Google authentication, pointing to a backend API endpoint (`/api/auth/google`). This offloads the OAuth flow to the server, simplifying frontend implementation.
*   **Navigation to Signup:** A `Link` component provides seamless navigation to the `/signup` page for new users.

### Sign Up Page Details

Similar to the login page, the `SignUpPage` manages user registration with form validation and Google OAuth integration.

```jsx title="frontend/src/pages/SignUpPage.jsx"
// ...
import { useAuthStore } from "../store/useAuthStore";
import { MessageSquare, User, Mail, Lock, EyeOff, Eye, Loader2 } from "lucide-react";
import { Link } from "react-router-dom";
import AuthImagePattern from "../components/AuthImagePattern";
import toast from "react-hot-toast";

import { FcGoogle } from "react-icons/fc";
const SignUpPage = () => {
  const [showPassword, setShowPassword] = useState(false);
  const [formData, setFormData] = useState({
    username: "",
    email: "",
    password: "",
  });

  const { signup, IsSigningUp } = useAuthStore();

  const validateForm = () => {
    if(!formData.username.trim()) return toast.error("Username is required");
    if(!formData.email.trim()) return toast.error("Email is required");
    if (!/\S+@\S+\.\S+/.test(formData.email)) return toast.error("Invalid email format");
    if (!formData.password) return toast.error("Password is required");
    if (formData.password.length < 6) return toast.error("Password must be at least 6 characters");

    return true;
  };

  const handleSubmit = (e) => {
    e.preventDefault();

    const success = validateForm();
    if(success===true) signup(formData);
  };

  const backendDomain = import.meta.env.VITE_BACKEND_URL;
  const googleAuthUrl = `${backendDomain}/api/auth/google`;
  return (
    <div className="min-h-screen grid lg:grid-cols-2">
      <div className="flex flex-col justify-center items-center p-6 sm:p-12">
        {/* ... Logo and Description ... */}
          <form onSubmit={handleSubmit} className="space-y-6">
            <div className="form-control">
              <label className="label">
                <span className="label-text font-medium">Username</span>
              </label>
              <div className="relative">
                <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <User className="size-5 text-base-content/40" />
                </div>
                <input
                  type="text"
                  className={`input input-bordered w-full pl-10`}
                  placeholder="johndoe"
                  value={formData.username}
                  onChange={(e) => setFormData({ ...formData, username: e.target.value })}
                />
              </div>
            </div>
            {/* ... Email and Password input ... */}
            <button type="submit" className="btn btn-primary w-full" disabled={IsSigningUp}>
              {IsSigningUp ? (
                <>
                  <Loader2 className="size-5 animate-spin" />
                  Loading...
                </>
              ) : (
                "Create Account"
              )}
            </button>
          </form>
          <div className="divider text-base-content/60 my-4">OR</div>

          <a
            href={googleAuthUrl}
            className="btn btn-primary btn-outline w-full"
          >
            <FcGoogle className="size-5 mr-2" />
            Sign up with Google
          </a>

          <div className="text-center">
            <p className="text-base-content/60">
              Already have an account?{" "}
              <Link to="/login" className="link link-primary">
                Sign in
              </Link>
            </p>
          </div>
        </div>
      </div>
      <AuthImagePattern
        title="Join our community"
        subtitle="Connect with friends, share moments, and stay in touch with your loved ones."
      />
    </div>
  );
};
export default SignUpPage;
```
[[frontend/src/pages/SignUpPage.jsx#L4-L149]](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/pages/SignUpPage.jsx#L4-L149)

Distinguishing features of the `SignUpPage`:

*   **Client-Side Validation:** The `validateForm` function performs essential input validation (e.g., username, email format, password length) before submitting data to the backend, providing immediate feedback to the user and reducing unnecessary network requests.
*   **Authentication Flow:** The `signup` function from `useAuthStore` handles the API call for user registration.
*   **Google OAuth:** Similar to the login page, it provides an option to sign up using Google, leveraging the backend's OAuth capabilities.

## Routing and Authentication Flow

The application's navigation flow is tightly coupled with the user's authentication state. This ensures that users can only access appropriate content based on their login status.



```mermaid
graph TD
    A["User Accesses App (App.jsx)"] --> B{Checking Auth Status?};
    B -- Yes --> C["Display Loader"];
    C --> D{Is User Authenticated?};
    B -- No --> D;
    D -- Yes, authUser Exists --> E{Route Requested?};
    E -- "/" --> F["Render HomePage"];
    E -- "/signup" or "/login" --> G["Redirect to '/' (HomePage)"];
    E -- "/settings" or "/profile" --> H["Render SettingsPage/ProfilePage"];
    D -- No, no authUser --> I{Route Requested?};
    I -- "/login" --> J["Render LoginPage"];
    I -- "/signup" --> K["Render SignUpPage"];
    I -- "/" or "/profile" --> L["Redirect to '/login'"];
```



## Key Integration Points

### State Management for Authentication
The `useAuthStore` (likely a Zustand or similar global state management solution) plays a critical role in managing the user's authentication state (`authUser`, `isCheckingAuth`, `isLoggingIn`, `IsSigningUp`). This centralized state ensures that all components have access to the current authentication status, enabling consistent conditional rendering and routing.

### API Communication
Both `LoginPage` and `SignUpPage` interact with backend authentication APIs. The `login` and `signup` functions within `useAuthStore` abstract these API calls, handling data submission and response processing. This separation of concerns keeps the UI components clean and focused on presentation. The Google OAuth flow is initiated directly from the frontend via a link to a backend endpoint, which then manages the entire OAuth handshake.

### User Experience and Scalability
*   **Instant Feedback:** The use of `isLoggingIn` and `IsSigningUp` states to show loading spinners (`Loader2`) provides immediate feedback to the user during asynchronous operations, improving perceived performance.
*   **Toast Notifications:** The `react-hot-toast` library is integrated globally in `App.jsx` and used in `SignUpPage` for form validation messages. This offers a non-intrusive way to inform users about the success or failure of actions.
*   **Conditional Rendering:** The strategic use of `Navigate` component within `react-router-dom` ensures that users are always directed to the appropriate page, enforcing access control efficiently. This approach is highly scalable as the number of protected routes grows, as it centralizes authentication-based redirection logic.
*   **Performance:** Lazy loading of page components (though not explicitly shown in the provided snippets, it's a common practice for `react-router-dom`) could further enhance initial load times for larger applications by only loading necessary code when a route is accessed.

Next: [Deployment and Environment Setup](./4_deployment-and-environment-setup.mdx)
```