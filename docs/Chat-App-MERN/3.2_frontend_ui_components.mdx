```mdx
---
title: "Frontend UI Components"
description: "Detailed documentation for the reusable React components that build the user interface."
---

# Frontend UI Components

<TOC />

This section provides comprehensive documentation for the reusable React components that form the user interface of the application. These components are designed to be modular, maintainable, and to interact seamlessly with the application's state management.

---

### AuthImagePattern.jsx

The `AuthImagePattern` component serves as a decorative background for authentication-related pages (e.g., login, signup). It displays a visually engaging pattern of pulsing squares along with a customizable title and subtitle.

- **File Path**: `frontend/src/components/AuthImagePattern.jsx`

#### Props

| Prop      | Type     | Description                                |
| :-------- | :------- | :----------------------------------------- |
| `title`   | `string` | The main title displayed on the pattern.   |
| `subtitle`| `string` | A descriptive subtitle below the main title. |

#### Example Usage

```jsx
<AuthImagePattern title="Welcome Back!" subtitle="Log in to continue your chat." />
```

#### Code Snippet

```jsx
const AuthImagePattern = ({ title, subtitle }) => {
    return (
      <div className="hidden lg:flex items-center justify-center bg-base-200 p-12">
        <div className="max-w-md text-center">
          {/* ... grid pattern ... */}
          <h2 className="text-2xl font-bold mb-4">{title}</h2>
          <p className="text-base-content/60">{subtitle}</p>
        </div>
      </div>
    );
  };
```

[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/AuthImagePattern.jsx)

---

### ChatContainer.jsx

The `ChatContainer` component is the primary interface for displaying and interacting with messages for a selected user. It fetches messages, handles real-time message updates, and integrates input functionality.

- **File Path**: `frontend/src/components/ChatContainer.jsx`

#### Key Features

-   **Message Display**: Renders a list of messages, differentiating between sender and receiver.
-   **Real-time Updates**: Subscribes to new messages and displays them in real-time using `useEffect` and `useChatStore`.
-   **Auto-scrolling**: Automatically scrolls to the latest message.
-   **Loading State**: Displays `MessageSkeleton` while messages are being loaded.
-   **Media Support**: Displays image attachments within messages.

#### State Management Integration

This component heavily relies on `useChatStore` for `messages`, `selectedUser`, `isMessagesLoading`, and methods like `getMessages`, `subscribeToMessages`, `unsubscribeFromMessages`. It also uses `useAuthStore` to identify the `authUser` for styling messages.

#### Internal Components

-   [`ChatHeader`](#chatheaderjsx): Displays information about the currently selected user.
-   [`MessageInput`](#messageinputjsx): Provides input fields for sending text and image messages.
-   [`MessageSkeleton`](#messageskeletonjsx): A loading placeholder for messages.

#### Component Hierarchy

````mermaid
graph TD
    A[ChatContainer] --> B(ChatHeader)
    A --> C(MessageInput)
    A --> D(MessageSkeleton)
```

[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/ChatContainer.jsx)

---

### ChatHeader.jsx

The `ChatHeader` component displays essential information about the currently selected user in the chat view, including their profile picture, username, and online status. It also provides a button to deselect the user and return to the default view.

- **File Path**: `frontend/src/components/ChatHeader.jsx`

#### Key Features

-   **User Information**: Shows the selected user's profile picture and username.
-   **Online Status**: Indicates whether the selected user is currently online or offline.
-   **Deselect User**: A button to clear the `selectedUser` from the chat store.

#### State Management Integration

-   It retrieves `onlineUsers` from `useAuthStore`.
-   It retrieves `selectedUser` and the `setSelectedUser` action from `useChatStore`.

#### Code Snippet

```jsx
const ChatHeader = () => {
    const { onlineUsers } = useAuthStore();
    const { selectedUser, setSelectedUser } = useChatStore();
    return (
        <div className="p-2.5 border-b border-base-300">
            <div className="flex items-center justify-between">
                <div className="flex items-center gap-3">
                    {/* ProfilePic and UserInfo */}
                    <div className="avatar">
                        <div className="size-10 rounded-full relative">
                            <img src={selectedUser.profilePic || "/avatar.png"} alt={selectedUser.userName} />
                        </div>
                    </div>
                    <div>
                        <h3 className="font-medium">{selectedUser.username}</h3>
                        <p className="text-sm text-base-content/70">
                            {onlineUsers.includes(selectedUser._id) ? "Online": "Offline"}
                        </p>
                    </div>
                </div>
                <button onClick={() => { setSelectedUser(null); }}> <X /> </button>
            </div>
        </div>
    );
};
```

[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/ChatHeader.jsx)

---

### FriendsBox.jsx

The `FriendsBox` component is a modal interface for managing friends within the application. It allows users to view their friends, send new friend requests, and manage pending or sent requests.

- **File Path**: `frontend/src/components/FriendsBox.jsx`

#### Key Features

-   **Tabbed Interface**: Organizes friends, pending requests, and sent requests into separate tabs.
-   **Add Friend**: A form to send friend requests by username or email.
-   **Request Management**:
    -   **Pending**: Accept or reject incoming friend requests.
    -   **Sent**: View requests that have been sent and are awaiting a response.
-   **Friend Management**: Remove existing friends.
-   **Dynamic Updates**: Fetches friend data, pending, and sent requests upon mounting.

#### State Management Integration

This component interacts extensively with `useChatStore` to access:
- `toggleFriendsBox` (to close the modal)
- `users` (friends list)
- `pendingRequests`
- `sentRequests`
- Actions: `getFriends`, `getPendingRequests`, `getSentRequests`, `sendFriendRequest`, `acceptFriendRequest`, `rejectFriendRequest`, `removeFriend`.

#### Actions within FriendsBox

````mermaid
graph TD
    A[FriendsBox Modal] --> B{Add Friend}
    A --> C{Tabs: Friends, Pending, Sent}
    B --> B1[Input Username/Email]
    B --> B2[Send Request]
    C --> C1[Friends List]
    C1 --> C1a[Remove Friend]
    C --> C2[Pending Requests]
    C2 --> C2a[Accept Request]
    C2 --> C2b[Reject Request]
    C --> C3[Sent Requests]
    C3 --> C3a[View Pending Status]
```

[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/FriendsBox.jsx)

---

### MessageInput.jsx

The `MessageInput` component provides the input field for users to compose and send messages. It supports both text messages and image attachments, complete with a preview feature.

- **File Path**: `frontend/src/components/MessageInput.jsx`

#### Key Features

-   **Text Input**: A textarea for typing messages.
-   **Image Attachment**:
    -   Allows users to select an image file.
    -   Displays a preview of the selected image.
    -   Provides an option to remove the image before sending.
    -   Validates file type to ensure it's an image.
-   **Send Message**: A button to send the composed message (text and/or image).
-   **Form Reset**: Clears the input field and image preview after sending.

#### State Management Integration

-   It utilizes the `sendMessage` action from `useChatStore` to send new messages to the backend.

#### Code Snippet

```jsx
const MessageInput = () => {
    const [text, setText] = useState("");
    const [imagePreview, setImagePreview] = useState(null);
    const fileInputRef = useRef(null);
    const { sendMessage } = useChatStore();

    // ... handleImageChange, removeImage ...

    const handleSendMessage = async (e) => {
        e.preventDefault();
        if (!text.trim() && !imagePreview) return;

        try {
            await sendMessage({ text: text.trim(), image: imagePreview });
            setText("");
            setImagePreview(null);
            if (fileInputRef.current) fileInputRef.current.value = "";
        } catch (error) {
            console.error("Failed to send message", error);
        }
    };

    return (
        <div className="p-4 w-full">
            {imagePreview && (
                <div className="mb-3 flex items-center gap-2">
                    <div className="relative">
                        <img src={imagePreview} alt="Preview" className="w-20 h-20 object-cover rounded-lg border border-zinc-700" />
                        <button onClick={removeImage} className="absolute -top-1.5 -right-1.5 w-5 h-5 rounded-full bg-base-300 flex items-center justify-center" type="button">
                            <X className="size-3" />
                        </button>
                    </div>
                </div>
            )}
            <form onSubmit={handleSendMessage} className="flex items-center gap-2">
                <div className="flex flex-1 gap-2">
                    {/* Input elements for text and image */}
                </div>
            </form>
        </div>
    );
};
```

[Source](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/MessageInput.jsx)

---

Next: [Frontend State Management](./3.3_frontend_state_management.mdx)
```