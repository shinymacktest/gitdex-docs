```mdx
---
title: "Frontend Development"
description: "Describes the client-side application, its structure, key components, and development setup."
sidebar_position: 3
---

# Frontend Development

<TOC />

The frontend application, named `Chatty`, is built with React and Vite, providing a modern, responsive user interface for real-time communication. This section details its architecture, core components, development setup, and key dependencies.

## System Purpose and Structure

The `Chatty` frontend is responsible for presenting the user interface, handling user interactions, managing client-side state, and communicating with the backend API and WebSocket server. It adopts a component-based architecture, promoting reusability and maintainability.

The application's structure is typical for a React project initialized with Vite:

-   `public/`: Static assets like `icon.png`.
-   `src/`: Application source code.
    -   `main.jsx`: Entry point for the React application.
    -   `App.jsx`: Root component defining application-wide structure and routing.
    -   `components/`: Reusable UI components (e.g., `Navbar`).
    -   `pages/`: Top-level components representing distinct views (e.g., `HomePage`, `LoginPage`).
    -   `store/`: Centralized state management using Zustand (e.g., `useAuthStore`, `useThemeStore`).
    -   `index.css`: Global styles.

### Core Technologies

The `Chatty` frontend leverages a robust set of modern web technologies:

| Category          | Technology           | Purpose                                              |
| :---------------- | :------------------- | :--------------------------------------------------- |
| **Framework**     | React                | Declarative UI development                           |
| **Build Tool**    | Vite                 | Fast development server and build tool               |
| **Routing**       | React Router DOM     | Client-side routing for SPA navigation               |
| **State Mgmt.**   | Zustand              | Lightweight, flexible state management               |
| **HTTP Client**   | Axios                | Promise-based HTTP client for API calls              |
| **Real-time**     | Socket.IO Client     | Bidirectional, event-based communication for chat    |
| **UI Components** | DaisyUI, TailwindCSS | CSS component library and utility-first CSS framework|
| **Icons**         | Lucide React, React Icons | Extensive icon sets for UI elements                 |
| **Notifications** | React Hot Toast      | Lightweight and responsive toast notifications       |

### Development Environment

The `package.json` file defines the project's metadata, scripts, and dependencies.

```json
// frontend/package.json
{
  "name": "frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview",
    "mobile": "vite --host"
  },
  "dependencies": {
    "axios": "^1.7.9",
    "cors": "^2.8.5",
    "lucide-react": "^0.471.1",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "react-hot-toast": "^2.5.1",
    "react-icons": "^5.5.0",
    "react-router-dom": "^7.1.1",
    "socket.io-client": "^4.8.1",
    "zustand": "^5.0.3"
  },
  "devDependencies": {
    "@eslint/js": "^9.17.0",
    "@types/react": "^18.3.18",
    "@types/react-dom": "^18.3.5",
    "@vitejs/plugin-react": "^4.3.4",
    "autoprefixer": "^10.4.20",
    "daisyui": "^4.12.23",
    "eslint": "^9.17.0",
    "eslint-plugin-react": "^7.37.2",
    "eslint-plugin-react-hooks": "^5.0.0",
    "eslint-plugin-react-refresh": "^0.4.16",
    "globals": "^15.14.0",
    "postcss": "^8.5.0",
    "tailwindcss": "^3.4.17",
    "vite": "^6.3.5"
  }
}
```

The `scripts` section defines commands for development:
-   `dev`: Starts the Vite development server. The `mobile` script specifically uses `--host` to make the server accessible from external devices on the same network, which is useful for mobile testing.
-   `build`: Compiles the application for production.
-   `lint`: Runs ESLint for code quality checks.
-   `preview`: Serves the production build locally for testing.

## Application Entry Point

The application's entry point is defined in `frontend/index.html` and `frontend/src/main.jsx`.

### `index.html` Overview

The `index.html` file serves as the single page for the Single Page Application (SPA). It includes meta-information, links to the favicon, and the `div` element with `id="root"` where the React application will be mounted.

```html
<!-- frontend/index.html -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml+png" href="/icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatty</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
```

The `script type="module" src="/src/main.jsx"` tag is crucial as it instructs the browser to load and execute the `main.jsx` file as an ES module, which then bootstraps the React application.

### `main.jsx` Initialization

`main.jsx` is the primary JavaScript file that renders the root React component into the DOM. It wraps the main `<App />` component with `<StrictMode>` and `<BrowserRouter>`.

```jsx
// frontend/src/main.jsx
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.jsx'
import { BrowserRouter } from 'react-router-dom'

createRoot(document.getElementById('root')).render(
  <StrictMode>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </StrictMode>,
)
```

-   **`StrictMode`**: This React wrapper activates additional checks and warnings for its descendants during development, helping to catch potential issues and enforce best practices.
-   **`BrowserRouter`**: Provided by `react-router-dom`, this component enables client-side routing. It uses the HTML5 history API to keep the UI in sync with the URL, allowing for navigation without full page reloads.

## Application Root Component (`App.jsx`)

The `App.jsx` file defines the main structure of the application, including the navigation bar, toast notifications, and dynamic routing based on authentication status.

```jsx
// frontend/src/App.jsx
// ... (imports) ...
import Navbar from './components/Navbar'
import { Routes, Route, Navigate } from 'react-router-dom'
import { useEffect } from 'react'
import HomePage from './pages/HomePage'
import SignUpPage from './pages/SignUpPage'
import LoginPage from './pages/LoginPage'
import SettingsPage from './pages/SettingsPage'
import ProfilePage from './pages/ProfilePage'

import { useThemeStore } from './store/useThemeStore'
import { useAuthStore } from './store/useAuthStore';
import { Loader } from 'lucide-react'
import { Toaster } from 'react-hot-toast'

const App = () => {
  const { authUser, checkAuth, isCheckingAuth, onlineUsers } = useAuthStore();
  const { theme } = useThemeStore();
  useEffect(() => {
    checkAuth();
  }, [checkAuth]);

  console.log("authUser: ", {authUser});

  console.log({onlineUsers})

  if(isCheckingAuth && !authUser) return (
      <div className='flex items-center justify-center h-screen'>
        <Loader className='size-10 animate-spin' />
      </div>
  )

  return (
    <div className='' data-theme={theme}>

      <Navbar />

      <Toaster />
      <Routes>
        <Route path='/' element={authUser ? <HomePage />: <Navigate to='/login' />} />
        <Route path='/signup' element={ !authUser ? <SignUpPage />: <Navigate to='/' />} />
        <Route path='/login' element={!authUser ? <LoginPage />: <Navigate to='/' />} />
        <Route path='/settings' element={<SettingsPage />} />
        <Route path='/profile' element={authUser ? <ProfilePage />: <Navigate to='/login' />} />

      </Routes>

    </div>
  )
}

export default App
```

### Key Functionality in `App.jsx`

1.  **Authentication Check**:
    -   It uses the `useAuthStore` (a Zustand store) to manage user authentication state (`authUser`, `isCheckingAuth`).
    -   An `useEffect` hook calls `checkAuth()` on component mount to verify if a user session exists, typically by making an API call to the backend.
    -   While `isCheckingAuth` is true and no `authUser` is present, a `Loader` component is displayed, preventing flash of unauthenticated content. This is a best practice for handling initial authentication checks in SPAs.

2.  **Theme Management**:
    -   `useThemeStore` provides access to the current `theme`.
    -   The `data-theme={theme}` attribute on the root `div` dynamically applies the selected theme (likely integrated with Tailwind CSS and DaisyUI).

3.  **Global Components**:
    -   `<Navbar />`: A persistent navigation bar across all pages.
    -   `<Toaster />`: A global component from `react-hot-toast` for displaying non-blocking notifications to the user.

4.  **Routing (`react-router-dom`)**:
    -   `<Routes>`: Contains all the individual route definitions.
    -   `<Route>`: Maps a URL `path` to a specific `element` (React component).
    -   **Protected Routes**:
        -   Routes like `/` (home) and `/profile` are protected. If `authUser` is not present, users are redirected to `/login` using `<Navigate to='/login' />`. This ensures only authenticated users can access certain parts of the application.
        -   Similarly, `/signup` and `/login` are restricted if `authUser` is already present, redirecting authenticated users to the home page (`/`). This prevents logged-in users from accessing authentication forms.
    -   **Public Routes**: `/settings` appears to be accessible to all users, regardless of authentication status.

### Frontend Architecture and Data Flow

The `Chatty` frontend follows a standard SPA pattern, leveraging a centralized state management solution (Zustand) and React's component lifecycle.





```mermaid
graph TD
    User --> Browser[Web Browser]
    Browser --> index.html
    index.html --> main.jsx[React App Entry Point]
    main.jsx --> App.jsx[Root Component]
    App.jsx --Initial Load--> checkAuth[Auth Check (useAuthStore)]
    checkAuth --API Call (axios)--> BackendAPI[Backend API]
    BackendAPI --Session Valid/Invalid--> checkAuth
    App.jsx --Theme State (useThemeStore)--> GlobalTheme[Apply Theme (data-theme)]
    App.jsx --Routing (react-router-dom)--> RouteConfig[Path-to-Component Mapping]
    RouteConfig --Auth Guard--> ProtectedPages{Authenticated Pages}
    RouteConfig --No Auth Guard--> PublicPages[Public Pages]

    ProtectedPages --> HomePage[Homepage]
    ProtectedPages --> ProfilePage[Profile Page]
    PublicPages --> LoginPage[Login Page]
    PublicPages --> SignUpPage[Sign Up Page]
    PublicPages --> SettingsPage[Settings Page]

    Navbar[Navbar Component] --> App.jsx
    Toaster[Toast Notifications] --> App.jsx
```



This diagram illustrates how the `index.html` file loads the React application via `main.jsx`, which then renders `App.jsx`. `App.jsx` handles initial authentication checks, theme application, and routes users to appropriate pages based on their authentication status, displaying common UI elements like the `Navbar` and `Toaster`.

## Best Practices and Insights

-   **Separation of Concerns**: The codebase clearly separates UI components (`components/`), page-level views (`pages/`), and state management (`store/`). This modularity enhances maintainability and testability.
-   **Centralized State Management**: Using Zustand for `useAuthStore` and `useThemeStore` provides a clear, scalable way to manage application-wide state, such as user authentication status and theme settings, preventing prop-drilling.
-   **Protected Routes**: The implementation of protected routes using `authUser ? <Component /> : <Navigate to='/login' />` is a fundamental security pattern for SPAs, ensuring that sensitive pages are only accessible to authenticated users.
-   **Loader During Auth Check**: Displaying a `Loader` while `isCheckingAuth` prevents a flicker of content before the authentication status is known. This improves user experience, especially during initial page loads or refreshes.
-   **Dynamic Theming**: The `data-theme` attribute, likely integrated with DaisyUI, allows for easy switching of UI themes without complex manual styling adjustments, providing a customizable user experience.

The frontend is designed for a rich, interactive user experience, with a strong focus on real-time features (via Socket.IO, although not explicitly shown in these files, `socket.io-client` dependency confirms its usage) and robust authentication handling.

Next: [UI Components & Pages](./3.1_frontend_components_pages.mdx)
```