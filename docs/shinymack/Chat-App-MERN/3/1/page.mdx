---
title: "User Interface Components"
description: "Details the reusable React components forming the user interface, from navigation to chat elements."
sidebar_position: 31
---
 # User Interface Components

This section provides an in-depth look into the core reusable React components that construct the user interface of the ShinyChat application. These components are designed for modularity and reusability, ranging from primary navigation to intricate chat functionalities.

## Core UI Components Overview

The ShinyChat frontend is composed of several key components that manage different aspects of the user experience. Each component serves a distinct purpose, ensuring a clear separation of concerns and maintainability.

<div className="mermaid">
graph TD
    A["Root Application"] --> B["Navbar Component"];
    A --> C["Sidebar Component"];
    A --> D["ChatContainer Component"];
    D --> E["ChatHeader Component"];
    D --> F["MessageInput Component"];
    C --> G["User List Item"];
    F --> H["Image Preview"];
    F --> I["Message Text Input"];

    B -.->|"Manages authentication state (useAuthStore)"| J["Authentication State"];
    B -.->|"Toggles friends list visibility (useChatStore)"| K["Chat State"];
    C -.->|"Fetches & Manages friends/users (useChatStore)"| K;
    C -.->|"Displays online status (useAuthStore)"| J;
    D -.->|"Fetches & Manages messages (useChatStore)"| K;
    D -.->|"Displays current user (useAuthStore)"| J;
    F -.->|"Sends messages (useChatStore)"| K;
</div>

## `Navbar` Component

The `Navbar` component (`frontend/src/components/Navbar.jsx`) is the primary navigation bar positioned at the top of the application. It provides access to essential functionalities such as the application logo, friends list toggle, settings, profile, and logout.

### Key Features:

*   **Brand Identity**: Displays the "ShinyChat" logo and name, linking back to the home page.
*   **Friends Toggle**: A button to show/hide the friends list, leveraging the `toggleFriendsBox` action from `useChatStore`.
*   **Navigation Links**: Provides links to `/settings` and `/profile` pages.
*   **User Authentication Actions**: Dynamically displays "Profile" and "Logout" buttons if a user is authenticated, using the `authUser` state and `logout` action from `useAuthStore`.

```jsx
// frontend/src/components/Navbar.jsx
import { Link } from "react-router-dom";
import { useAuthStore } from "../store/useAuthStore";
import { LogOut, MessageSquare, Settings, User, Users } from "lucide-react";
import { useChatStore } from "../store/useChatStore";

const Navbar = () => {
  const { logout, authUser } = useAuthStore();
  const { toggleFriendsBox } = useChatStore(); 

  return (
    <header className="...">
      <div className="container mx-auto px-4 h-16">
        <div className="flex items-center justify-between h-full">
          {/* ... Brand and Links ... */}
          <div className="flex items-center gap-4">
            <button className="btn btn-sm gap-2" onClick={toggleFriendsBox}> {/* Friends Button */}
              <Users className="size-5" />
              <span className="hidden sm:inline">Friends</span>
            </button>
            <Link to={"/settings"} className={`btn btn-sm gap-2 transition-colors`}> {/* Settings Link */}
              <Settings className="size-4"/>
              <span className="hidden sm:inline">Settings</span>
            </Link>
            {authUser && ( // Conditional rendering based on authentication
              <>
                <Link to={"/profile"} className={`btn btn-sm gap-2`}> {/* Profile Link */}
                  <User className="size-5" />
                  <span className="hidden sm:inline">Profile</span>
                </Link>
                <button className="btn btn-sm flex gap-2 items-center" onClick={logout}> {/* Logout Button */}
                  <LogOut className="size-5" />
                  <span className="hidden sm:inline">Logout</span>
                </button>
              </>
            )}
          </div>
        </div>
      </div>
    </header>
  );
};

export default Navbar;
```
[View on GitHub](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/Navbar.jsx#L14-L62)

## `Sidebar` Component

The `Sidebar` component (`frontend/src/components/Sidebar.jsx`) is responsible for displaying the list of friends or available chat users. It allows users to select a friend to initiate or view a chat conversation.

### Key Features:

*   **Friends List Display**: Renders a scrollable list of users.
*   **User Selection**: Allows selecting a user, which updates the `selectedUser` state in `useChatStore` to display their chat.
*   **Online Status Indicator**: Visually indicates if a user is online using `onlineUsers` from `useAuthStore`.
*   **Online Filter**: A checkbox to filter the list to show only online users.
*   **Dynamic Visibility**: On small screens, the sidebar dynamically hides when a user is selected, prioritizing the chat view.
*   **Loading State**: Displays a `SidebarSkeleton` while the user list is loading.

```jsx
// frontend/src/components/Sidebar.jsx
import { useEffect, useState } from "react";
import { useChatStore } from "../store/useChatStore";
import SidebarSkeleton from "./skeletons/SidebarSkeleton";
import { Users } from "lucide-react";
import { useAuthStore } from "../store/useAuthStore";

const Sidebar = () => {
    const { getFriends, users, selectedUser, setSelectedUser, isUsersLoading } =
        useChatStore();
    const { onlineUsers } = useAuthStore();
    const [showOnlineOnly, setShowOnlineOnly] = useState(false);

    useEffect(() => { // Fetches friends list on mount
        getFriends();
    }, [getFriends]);

    const filteredUsers = showOnlineOnly // Filters users based on online status
        ? users.filter((user) => onlineUsers.includes(user._id))
        : users;

    if (isUsersLoading) return <SidebarSkeleton />; // Shows skeleton during loading

    return (
        <div className={`h-full sm:w-72 sm:border-r border-base-300  flex-col transition-all duration-200 ${selectedUser ?
                                    "hidden sm:flex w-[100vw] " // Hides sidebar on small screens when user is selected
                                    : ""}`}>
            <div className="border-b border-base-300  p-5">
                {/* ... Friends header ... */}
                <div className="mt-3 lg:flex items-center gap-2">
                    <label className="cursor-pointer flex items-center gap-2">
                        <input
                            type="checkbox"
                            checked={showOnlineOnly}
                            onChange={(e) =>
                                setShowOnlineOnly(e.target.checked)
                            }
                            className="checkbox checkbox-sm"
                        />
                        <span className="text-sm">Show online only</span>
                    </label>
                    <span className="text-xs text-zinc-500">
                          ({users.filter(friend => onlineUsers.includes(friend._id)).length} online)
                    </span>
                </div>
                <div className="overflow-y-scroll h-[calc(100vh-14rem)] w-full flex flex-col py-3">
                    {filteredUsers.map((user) => (
                        <button
                            key={user._id}
                            onClick={() => setSelectedUser(user)} // Sets selected user
                            className={`sm:w-full w-[88vw] p-3 flex items-center gap-3 hover:bg-base-300 transition-colors
                            ${
                                selectedUser?._id === user._id
                                    ? "bg-base-300 ring-1 ring-base-300"
                                    : ""
                            }`}
                        >
                            <div className="relative mx-0">
                                <img
                                    src={user.profilePic || "/avatar.png"}
                                    alt={user.username}
                                    className="size-12 object-cover rounded-full"
                                />
                                {onlineUsers.includes(user._id) && ( // Online status indicator
                                    <span className="absolute bottom-0 right-0 size-3 bg-green-500 rounded-full ring-2 ring-zinc-900" />
                                )}
                            </div>
                            <div className=" block text-left min-w-0">
                                <div className=" font-medium truncate">
                                    {user.username}
                                </div>
                                <div className="text-sm text-zinc-400">
                                    {onlineUsers.includes(user._id)
                                        ? "Online"
                                        : "Offline"}
                                </div>
                            </div>
                        </button>
                    ))}
                </div>
                {filteredUsers.length == 0 && (
                    <div className="text-center text-zinc-500 py-4">No online friends</div>
                )}
            </div>
        </div>
    );
};

export default Sidebar;
```
[View on GitHub](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/Sidebar.jsx#L14-L103)

## `ChatContainer` Component

The `ChatContainer` component (`frontend/src/components/ChatContainer.jsx`) is the central display area for messages in a chat conversation. It handles fetching, displaying, and subscribing to real-time messages for the `selectedUser`.

### Key Features:

*   **Message Display**: Renders individual chat messages, showing sender's profile picture, message content (text and/or image), and timestamp.
*   **Real-time Updates**: Subscribes to new messages via `subscribeToMessages` and `unsubscribeFromMessages` from `useChatStore`.
*   **Automatic Scrolling**: Automatically scrolls to the latest message using a `useRef` and `useEffect`.
*   **Dynamic Styling**: Messages are styled (`chat-end` or `chat-start`) based on whether the `authUser` is the sender.
*   **Loading State**: Displays `MessageSkeleton` while messages are being fetched.
*   **Sub-components**: Integrates `ChatHeader` (for selected user info) and `MessageInput` (for sending messages).

```jsx
// frontend/src/components/ChatContainer.jsx
import { useEffect, useRef } from "react";
import { useChatStore } from "../store/useChatStore";
import ChatHeader from "./ChatHeader";
import MessageInput from "./MessageInput";
import MessageSkeleton from "./skeletons/MessageSkeleton";
import { useAuthStore } from "../store/useAuthStore";
import { formatMessageTime } from "../lib/utils";

const ChatContainer = () => {
    const { messages, getMessages, isMessagesLoading, selectedUser, subscribeToMessages, unsubscribeFromMessages } =
        useChatStore();
    const { authUser } = useAuthStore();
    const messageEndRef = useRef(null);

    useEffect(() => { // Fetches messages and subscribes to real-time updates
        getMessages(selectedUser._id);
        subscribeToMessages();
        return () => unsubscribeFromMessages();
    }, [selectedUser._id, getMessages, subscribeToMessages, unsubscribeFromMessages]);
    
    useEffect(() => { // Auto-scrolls to the latest message
        if(messageEndRef.current && messages){
            messageEndRef.current.scrollIntoView({behaviour : "smooth"})
        }
    }, [messages])

    if (isMessagesLoading) // Shows skeleton during loading
        return (
            <div className="flex-1 flex flex-col overflow-auto">
                <ChatHeader />
                <MessageSkeleton />
                <MessageInput />
            </div>
        );
    return (
        <div className="flex-1 flex flex-col overflow-auto">
            <ChatHeader />
            <div className="flex-1 overflow-y-auto p-4 space-y-4">
                {messages.map((message) => ( // Renders each message
                    <div
                        key={message._id}
                        className={`chat ${message.senderId == authUser._id ? "chat-end": "chat-start"} `} // Dynamic chat bubble styling
                        ref={messageEndRef}
                    >
                        <div className="chat-image avatar">
                            <div className="size-9 rounded-full border">
                                <img
                                    src={message.senderId == authUser._id ? authUser.profilePic || "/avatar.png": selectedUser.profilePic || "/avatar.png"}
                                    alt="profilepic"
                                 />
                            </div>
                        </div>
                        <div className="chat-header mb-1">
                            <time className="text-xs opacity-50 ml-1">{formatMessageTime(message.createdAt)}</time>
                        </div>
                        <div className="chat-bubble flex flex-col">
                            {message.image && ( // Displays image if present
                                <img 
                                    src={message.image}
                                    alt="Attachment"
                                    className="sm:max-w-[200px] rounded-md " 
                                />
                            )}
                            {message.text && <p>{message.text}</p>} {/* Displays text if present */}
                        </div>
                    </div>
                ))}
            </div>
            <MessageInput /> {/* Message input component */}
        </div>
    );
};

export default ChatContainer;
```
[View on GitHub](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/ChatContainer.jsx#L10-L88)

## `MessageInput` Component

The `MessageInput` component (`frontend/src/components/MessageInput.jsx`) provides the interface for users to type and send messages, including the ability to attach images.

### Key Features:

*   **Text Input**: A standard text field for typing messages.
*   **Image Attachment**: Allows users to select an image file to send.
*   **Image Preview**: Displays a preview of the selected image before sending, with an option to remove it.
*   **Send Functionality**: Sends the message (text and/or image) via the `sendMessage` action from `useChatStore`.
*   **Input Clearing**: Clears the input field and image preview after a message is successfully sent.
*   **Validation**: Prevents sending empty messages (no text and no image).
*   **Error Handling**: Displays toast notifications for invalid file types.

```jsx
// frontend/src/components/MessageInput.jsx
import { useRef, useState } from "react";
import { useChatStore } from "../store/useChatStore";
import { Image, Send, X } from "lucide-react";
import toast from "react-hot-toast";

const MessageInput = () => {
    const [text, setText] = useState("");
    const [imagePreview, setImagePreview] = useState(null);
    const fileInputRef = useRef(null);
    const { sendMessage } = useChatStore();

    const handleImageChange = (e) => { // Handles image file selection and preview generation
        const file = e.target.files[0];
        if (!file.type.startsWith("image/")) {
            toast.error("Please select an image file");
            return;
        }
        const reader = new FileReader();
        reader.onloadend = () => {
            setImagePreview(reader.result);
        };
        reader.readAsDataURL(file);
    };

    const removeImage = () => { // Removes selected image preview
        setImagePreview(null);
        if (fileInputRef.current) fileInputRef.current.value = "";
    };

    const handleSendMessage = async (e) => { // Handles sending messages
        e.preventDefault();
        if (!text.trim() && !imagePreview) return; // Prevents sending empty messages
        try {
            await sendMessage({
                text: text.trim(),
                image: imagePreview,
            });
            setText(""); // Clears input
            setImagePreview(null); // Clears image preview
            if (fileInputRef.current) fileInputRef.current = "";
        } catch (error) {
            console.error("Failed to send message", error);
        }
    };

    return (
        <div className="p-4 w-full">
            {imagePreview && ( // Displays image preview if available
                <div className="mb-3 flex items-center gap-2">
                    <div className="relative">
                        <img
                            src={imagePreview}
                            alt="Preview"
                            className="w-20 h-20 object-cover rounded-lg border border-zinc-700"
                        />
                        <button onClick={removeImage} className="..." type="button"> {/* Remove image button */}
                            <X className="size-3" />
                        </button>
                    </div>
                </div>
            )}
            <form onSubmit={handleSendMessage} className="flex items-center gap-2">
                <div className="flex flex-1 gap-2">
                    <input
                        type="text"
                        className="w-full input input-bordered rounded-lg input-sm sm:input-md"
                        placeholder="Type a message..."
                        value={text}
                        onChange={(e) => setText(e.target.value)}
                    />
                    <input
                        type="file"
                        accept="image/*"
                        className="hidden"
                        ref={fileInputRef}
                        onChange={handleImageChange}
                    />
                    <button type="button" className={`hidden sm:flex btn btn-circle ${imagePreview ? "text-emerald-500" : "text-zinc-400"}`}
                        onClick={() => { if (fileInputRef.current) { fileInputRef.current.click(); } else { console.error("fileInputRef is not attached"); } }}> {/* Image attachment button */}
                        <Image size={20} />
                    </button>
                </div>
                <button type="submit" className="btn btn-sm btn-circle" disabled={!text.trim() && !imagePreview}> {/* Send message button */}
                    <Send size={22} />
                </button>
            </form>
        </div>
    );
};

export default MessageInput;
```
[View on GitHub](https://github.com/shinymack/Chat-App-MERN/blob/main/frontend/src/components/MessageInput.jsx#L9-L135)

## Key Integration Points

The UI components heavily rely on global state management provided by Zustand stores, `useChatStore` and `useAuthStore`, to maintain application-wide data and actions.

<div className="mermaid">
sequenceDiagram
    participant User
    participant Navbar["Navbar Component"]
    participant Sidebar["Sidebar Component"]
    participant ChatContainer["ChatContainer Component"]
    participant MessageInput["MessageInput Component"]
    participant AuthStore["useAuthStore (Zustand)"]
    participant ChatStore["useChatStore (Zustand)"]

    User->>+Navbar: Clicks "Logout"
    Navbar->>+AuthStore: Calls logout()
    AuthStore-->>-Navbar: Updates authUser state to null
    AuthStore-->>-User: Logs out user (UI update)

    User->>+Sidebar: Selects a friend
    Sidebar->>+ChatStore: Calls setSelectedUser(friend)
    ChatStore-->>-Sidebar: Updates selectedUser state
    ChatStore-->>-ChatContainer: selectedUser state change
    ChatContainer->>+ChatStore: Calls getMessages(friendId)
    ChatStore-->>-ChatContainer: Fetches & updates messages state
    ChatContainer-->>-User: Displays chat with selected friend

    User->>+MessageInput: Types message & attaches image
    MessageInput->>MessageInput: Updates local state (text, imagePreview)
    User->>MessageInput: Clicks "Send"
    MessageInput->>+ChatStore: Calls sendMessage({text, image})
    ChatStore->>ChatStore: Sends message to backend (API call)
    ChatStore-->>-MessageInput: Message sent confirmation
    MessageInput->>MessageInput: Clears local state
    ChatStore-->>-ChatContainer: New message received (real-time/fetch)
    ChatContainer-->>-User: Displays new message in chat
</div>

These components form the backbone of the ShinyChat frontend, ensuring a cohesive and interactive user experience through their modular design and efficient state management.

Next: [Pages and Routing](./3.2_pages-routing.mdx)